#include <stdio.h>
#include <unistd.h>

void emergency_unlock() {
    FILE *f;
    char buf[256];

    puts("[!] EMERGENCY MODE ACTIVATED");

    f = fopen("flag.txt", "r");
    if (!f) {
        puts("[-] flag.txt tidak ditemukan!");
        return;
    }

    fgets(buf, sizeof(buf), f);
    fclose(f);

    puts("ACCESS GRANTED!");
    printf("FLAG: %s\n", buf);
}

void door_system() {
    char key[64];

    puts("=== AUTOMATIC SECURITY DOOR ===");
    puts("Masukkan kode akses manual:");

    read(0, key, 200);   

    puts("Memverifikasi kode...");
}

int main() {
    setvbuf(stdout, NULL, _IONBF, 0);
    door_system();
    puts("AKSES DITOLAK. PINTU TETAP TERKUNCI.");
    return 0;
}
